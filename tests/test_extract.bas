10 REM TEST EXTRACT VS READ POINTER
20 ERASE "test_extract"
30 SERIAL "test_extract", 128
40 OPEN (1) "test_extract", SERIAL
50 PRINT "WRITING 3 RECORDS..."
60 WRITE (1) "RECORD 1"
70 WRITE (1) "RECORD 2"
80 WRITE (1) "RECORD 3"
90 CLOSE (1)
100 OPEN (1) "test_extract", SERIAL
110 REM EXTRACT SHOULD NOT MOVE POINTER
120 EXTRACT (1) A$
130 PRINT "EXTRACT 1 READ: "; A$
140 EXTRACT (1) B$
150 PRINT "EXTRACT 2 READ: "; B$
160 IF A$ <> B$ THEN PRINT "FAIL: EXTRACT ADVANCED POINTER" ELSE PRINT "PASS: EXTRACT DID NOT ADVANCE"
170 REM READ SHOULD MOVE POINTER
180 READ (1) C$
190 PRINT "READ 1 (STILL REC 1?): "; C$
200 READ (1) D$
210 PRINT "READ 2 (SHOULD BE REC 2): "; D$
220 IF C$ <> A$ THEN PRINT "FAIL: FIRST READ SHOULD BE RECORD 1"
230 IF D$ <> "RECORD 2" THEN PRINT "FAIL: SECOND READ SHOULD BE RECORD 2" ELSE PRINT "PASS: READ ADVANCED POINTER"
240 CLOSE (1)
250 ERASE "test_extract"
260 END
