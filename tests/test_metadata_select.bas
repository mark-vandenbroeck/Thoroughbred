10 REM Test Metadata Persistence and SELECT
20 ERASE "META_TEST", ERR=30
30 DIRECT "META_TEST", 10, 64
40 OPEN (1) "META_TEST"
50 WRITE (1, KEY="KEY1") "DATA1", "DATA2"
60 CLOSE (1)
70 REM Now open without DIRECT keyword
80 OPEN (1) "META_TEST"
90 READ (1, KEY="KEY1") A$, B$
100 PRINT "READ FROM META:", A$, B$
110 IF A$ = "DATA1" THEN 130
120 PRINT "FAILED DATA1"
125 GOTO 200
130 IF B$ = "DATA2" THEN 150
140 PRINT "FAILED DATA2"
145 GOTO 200
150 PRINT "METADATA PERSISTENCE OK"
160 CLOSE (1)
170 REM Test SELECT
180 SELECT (2) "*"
190 READ (2, ERR=220) F$
200 PRINT "FILE IN LIST:", F$
210 GOTO 190
220 PRINT "SELECT TEST DONE"
230 END
